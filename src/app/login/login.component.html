<app-intro></app-intro>
<div class="fluid-container" *ngIf="gotoLogin===true" > 
  <div class="div1">
  <img src="assets\images\logo.png" alt="" >
 
<input type="number" class="form-control" placeholder="Enter your phone number" name="intropage-num" (keyup.enter)="move1($event)" [(ngModel)]="phnNum" >
<label style="transform: translateY(-3.4em);" class="form-label"for="intropage-num">Mobile number</label> 
</div>
</div>
<!-- <ng-template #logorReg> -->
  <!-- <app-success-password-changed *ngIf="passwordChangedTemplate"></app-success-password-changed> -->
<div class="container vertical-center " [ngClass]="{checkthis:gotoLogin,checkpass:passwordChangedTemplate}" >
  <div class=" row ">
    <div class="col-md-8 login-form-1 ">

      <div id="carouselExampleIndicators" class="carousel slide text-center" data-bs-ride="carousel" >
        
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img class="img-slideshow" src="assets\images\one.png">
            <h2>Learner Engagement</h2>
            <span class="carousel-description ">Interactive features mirror the traditional classroom experience and learners receive feedback to increase long-term retention, tripling learning efficacy over standard video.</span>
          </div>
          <div class="carousel-item">
            <img class="img-slideshow" src="assets\images\second.png">

            <h2>Accountable Training</h2>

            <span class="carousel-description ">Receive immediate, accessible data (both performance and behavior-based) to effectively remediate concepts, automatically assign grades, and address deficiencies.</span>
          </div>

          <div class="carousel-item">
            <img class="img-slideshow" src="assets\images\three.png" alt="Chania">

            <h2>Seamless Workflow</h2>

            <span class="carousel-description ">Sync rosters, create and assign impactful video experiences, enrich your flipped classroom, and streamline tedious grading.enrich your  flipped classroom, and streamline tedious grading</span>


         

        </div>
        
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
          data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
          data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
          aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
          aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
          aria-label="Slide 3"></button>
      </div>
    </div>
    </div>


    <!-- Page 1 html -->
    <div class="col-md-4 login-form-2 text-center " *ngIf="logOrReg==='welcome';else login">
      <div>
        <!-- <a routerLink="/home">Check</a> -->
        <img src="assets\images\logo.png" style="margin-top: 12%;">
        <p class="title-text">Welcome</p>
        <p class="title-inner-text ">Are you ready to study easily in a virtual way?</p>
        <button class="btn-login" (click)="LoginOrReg('login')">Login</button>
        <p style="color:white;font-size: 18px;margin: 0;margin-top: 6%;">Or</p>
        <button class="btn-register" (click)="LoginOrReg('register')">Register</button>
        <p class="policy-text">By creating new account, you agree to our <a href="#">Terms of Services</a> & <a href="#">Privacy Policy</a></p>
      </div>
    </div>

    <ng-template #login>
      <!-- Login page html -->
      <div class="col-md-4 login-form-2 text-center" *ngIf="logOrReg==='login';else register">
        <div>
          <div [ngSwitch]="swapVariableData">
            <div *ngSwitchCase="'forgotpassword'">
              <img src="assets\images\logo.png"style="margin-top: 12%;">
              <p class="title-text">Forgot Password</p>
              <p class="title-inner-text " style="margin-bottom:0;">Please enter your phone number .</p>
              <p class="title-inner-text " style="margin-top:0;">You will receive a code to create a new password.</p>

              <div class="number-label">
                <input type="text" class="form-control" placeholder="Enter your phone number"
                  [(ngModel)]="phnNumberToChangePwd" (keyup.enter)="changePwd($event, phnNumberToChangePwd)">
                <label style="transform: translateY(-3.4em);" for="Username" class="form-label">Mobile number</label>

              </div>
              <button type="button" style="margin-top: 8%;" class="btn-login"
                (click)="changePwd($event, phnNumberToChangePwd)">Send</button>


            </div>
            <div *ngSwitchCase="'verifyy'">
              <app-verify (verification)="fromParent($event)"></app-verify>
            </div>
            <div *ngSwitchCase="'continue'">
              <h3>continue</h3>
            </div>
            <div *ngSwitchCase="'verify'">
              <img src="assets\images\logo.png"style="margin-top: 12%;">
              <p class="title-text">Create New Password</p>
              <p class="title-inner-text " style="margin-bottom:0;">Your password must have at least 6 or more
                characters</p>

              <form [formGroup]="changepasswordForm" (ngSubmit)="onChangePassword()">
                <div class="number-label">

                  <input style="margin-top: 8px;" type="text" class="form-control" placeholder="New Password"
                    formControlName="password">
                  <label style="transform: translateY(-3.4em);margin-top: 8px;" class="form-label">New Password</label>

                  <input type="text" class="form-control" placeholder="Confirm New Password"
                    formControlName="confirmPassword">
                  <label for="Username" class="form-label" style="transform: translateY(-3.2em);">Confirm New
                    Password</label>

                </div>
                <button type="submit" style="margin-top: 8%;padding-left: 23%;padding-right: 23%;"
                  class="btn-login">Reset Password</button>
              </form>
            </div>
            <div class="login-page" *ngSwitchDefault>
              <img src="assets\images\logo.png" style="margin-top: 12%;">
              <p class="title-text" style="margin-top: 10%;">Welcome Back</p>
              <p class="title-inner-text " style="margin: 0;">Easy to learn anytime and anywhere.</p>
              <p class="title-inner-text "style="margin-top: 0;margin-bottom:8%" >Login to your account</p>
              <div class="facebook-google">
                <button class="facebook"><img src="assets\images\facebook.png"></button>
                <button class="google"><img src="assets\images\google.png"></button>
              </div>

              <form [formGroup]="loginForm" (ngSubmit)="login1()" novalidate>
                <div class="login-input">

                  <input type="text" class="form-control" [ngClass]="{usernamevalidationsuccess:loginUserNameValidation,usernamevalidationfail:loginUserNameValidation===false}" placeholder="Username" formControlName="loginusername" >
                  <label for="Username" class="form-label" style="transform: translateY(-3.2em);">Username</label>
                  <input type="text" class="form-control" [ngClass]="{usernamevalidationsuccess:loginUserPasswordValidation,usernamevalidationfail:loginUserPasswordValidation===false}" placeholder="Enter your password"
                    formControlName="loginpassword" >
                  <label for="Username" class="form-label" style="transform: translateY(-3.2em);">Password</label>
                </div>
                <button type="submit" class="btn-login">Continue</button>
              </form>
              <div class="reg-or-forgot">
                <p class="font-p">Don't have a account? <a style="color: rgba(238, 92, 77, 1);" 
                    (click)="LoginOrReg('register')">Register</a></p>
                <p><a (click)="toChangePassword('forgotpassword')" style="color: rgba(238, 92, 77, 1);" >Forgot
                    password?</a></p>
              </div>
              <div *ngIf="loginUserNameValidation===false||loginUserPasswordValidation===false" class="error-display" >
                {{errorMessageFromServer|titlecase}}

              </div>

            </div>

          </div>
        </div>


      </div>






      <ng-template #register>
        <!-- Register page Html -->
        <div class="col-md-4 login-form-2 text-center" *ngIf="registerContinue==='register';else continue">
          <div>
            <img src="assets\images\logo.png"style="margin-top: 12%;">
            <p class="title-text">New Account</p>
            <br>
            <p class="after-title">Create a new account to get access to all courses by entering your mobile number</p>


            <div class="login-input">

              <form [formGroup]="myForm" (ngSubmit)="RegContinue('continue')" novalidate>
                <div class="input-group">

                  <input type="text" class="form-control " (focus)="onFocus1($event)" formControlName="mob"
                    placeholder="Enter your mobile number" >
                  <label style="height: 20px;"for="Username" class="form-label">Mobile number</label>


                </div>

                <button type="submit" class="btn-login" style="margin: 0;min-width: 86%;">Continue</button>

              </form>
            </div>


            <br>
            <p class="reg-page-last-text">Already have an account? <a style="color:rgba(238, 92, 77, 1);cursor: pointer;"
                (click)="LoginOrReg('login')">Login</a></p>
            <br><br>
            <div class="facebook-google">
              <button class="facebook"><img src="assets\images\facebook.png"></button>
              <button class="google"><img src="assets\images\google.png"></button>
            </div>
            <div *ngIf="(phnNumberSubmit===true && m['mob'].errors )" class="alert alert-danger ">

              <div *ngIf="m['mob'].errors?.['required']"><img src="assets\images\white-error.png" width="20px"
                  height="20px">Please enter mobile number</div>
              <div *ngIf="m['mob'].errors?.['pattern']" #error><img src="assets\images\white-error.png" width="20px"
                  height="20px">Invalid Mobile number</div>


            </div>


            <div *ngIf="phnNumberSubmit===true && registerPageError &&!m['mob'].errors "
              [ngClass]="{'alert alert-danger':phnNumberSubmit===true}">
              {{registerPageError}}
            </div>
          </div>
          <div *ngIf="regError.message==='you have alreday registred ..please login to continue'" class="error-display" >
            <p>Already registered! Please Login</p>

          </div>
        </div>
        <ng-template #continue>
          <div class="col-md-4 login-form-2 text-center"style="position: relative;">
            <div >
              <app-verify (verification)="fromParent($event)"
                *ngIf="toPersonalDetails==='continue';else personalDetails"></app-verify>
            </div>

          </div>



          <ng-template #personalDetails>
            <!-- <div class="col-md-4 login-form-2  text-center" style="width: 100%;"> -->
             
                <p class="title-text">Personal Details</p>
                <br>
                <p class="after-title" style="padding-left: 20px;padding-right: 20px;">Please fill out the fields below so we can learn some information about you.</p>
                <form class="personal-details" [formGroup]="contactForm" (ngSubmit)="onSubmit()" novalidate>
                  <p style="
                    color: rgba(110, 143, 202, 1);
                    margin: 0;
                    text-align: left;
                  ">
                    Mobile number
                  </p>
                  <p style="
                    color: white;
                    font-size: 20px;
                    text-align: left;
                    margin-bottom: 8%;
                  ">
                    {{myForm.value.mob}}
                  </p>

                  <input (focus)='onFocus("fullname",$event) ' type="text" id="fullname" name="fullname"
                    class="form-control register-number" placeholder="Full Name" formControlName="fullname" />
                  <label style="transform: translateY(-3.4em)" for="fullname" class="form-label">Full Name
                  </label>

                  <input (focus)='onFocus("username",$event)' type="text" id="username" name="Username"
                    class="form-control register-number" placeholder=" Username" formControlName="username" />
                  <label style="transform: translateY(-3.4em)" for="Username" class="form-label">Username</label>

                  <input (focus)='onFocus("email",$event)' type="text" id="email" name="email"
                    class="form-control register-number" placeholder="Email Id" formControlName="email" />
                  <label style="transform: translateY(-3.4em)" for="email" class="form-label">Email ID</label>

                  <input (focus)='onFocus("password",$event)' type="text" id="password" name="password"
                    class="form-control register-number" placeholder="Password" formControlName="password" />
                  <label style="transform: translateY(-3.4em)" for="password" class="form-label">Password
                  </label>

                  <input (focus)='onFocus("confirmPassword",$event)' type="password" id="confirmPassword"
                    name="confirmPassword" placeholder="Confirm password" class="form-control register-number"
                    formControlName="confirmPassword" />
                  <label for="confirmPassword" class="form-label" style="transform: translateY(-3.4em)">Confirm Password
                  </label>

                  <button type="submit" [disabled]="!contactForm.valid" class="btn-login" style="margin: 0">
                    Verify
                  </button>
                </form>

             

              <div
                *ngIf="(f[errorMessageHandler].touched||submitted)&&(f[errorMessageHandler].errors?.['required'])||(f[errorMessageHandler].errors?.['email'])||(f[errorMessageHandler].errors?.['minlength'])||(f[errorMessageHandler].errors?.['pattern'])||(f[errorMessageHandler].errors?.['matching'])">
                <div class="alert alert-danger" 
                  *ngIf="(f[errorMessageHandler].errors?.['required'])">
                  {{errorMessageHandler|titlecase}} Required

                </div>
                <div class="alert alert-danger"
                  *ngIf="(f[errorMessageHandler].errors?.['minlength'])">
                  {{errorMessageHandler|titlecase}} min lenght Required
                </div>
                <div class="alert alert-danger"
                  *ngIf="(f[errorMessageHandler].errors?.['email'])">
                  {{errorMessageHandler|titlecase}} is Invalid
                </div>
                <div class="alert alert-danger" 
                  *ngIf="(f[errorMessageHandler].errors?.['pattern'])">
                  {{errorMessageHandler|titlecase}} pattern is Wrong
                </div>

                <div class="alert alert-danger" 
                  *ngIf="(f[errorMessageHandler].errors?.['matching'])">
                  {{errorMessageHandler|titlecase}} has not Matched
                </div>

              </div>
            <!-- </div> -->
          </ng-template>
        </ng-template>
      </ng-template>
    </ng-template>

  </div>



</div>

<!-- </ng-template> -->